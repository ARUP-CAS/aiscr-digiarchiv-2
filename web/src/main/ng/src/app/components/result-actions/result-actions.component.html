<div class="app-fxLayout app-row app-gap-2">
  @if (!mapDetail() && (result().chranene_udaje || result().loc_rpt || result().loc)) {
    <button matIconButton (click)="service.showInMap(result(), false, true)" [matTooltip]="'card.tooltip.Zobrazit na mapě' | translate">
      <mat-icon>map</mat-icon>
    </button>
  }

  <button matIconButton [matTooltip]="'card.tooltip.Odkazy' | translate" [matMenuTriggerFor]="links">
    <mat-icon>link</mat-icon>
  </button>
  <mat-menu #links="matMenu">
    <a mat-menu-item [routerLink]="'/id/' + result().ident_cely" [queryParams]="{lang: state.currentLang}" target="_blank">
      {{ 'card.menu.Persistentní odkaz' | translate }}
    </a>
    @for (item of config.choiceApi; track item) {
      <a mat-menu-item [href]="item.url + apiIdentCely(item)" target="_blank">
        {{ 'card.menu.' + item.label | translate }}
      </a>
    }
  </mat-menu>

  <button matIconButton [matMenuTriggerFor]="mCitace">
    <mat-icon>menu_book</mat-icon>
  </button>
  <mat-menu #mCitace="matMenu">
    <a mat-menu-item  (click)="showCitation()" [matTooltip]="'Zobrazit citaci'">
      {{ 'card.menu.Zobrazit citaci' | translate }}
    </a>
    @if (bibTex()) {
      <a mat-menu-item   (click)="service.showBiBText(result().ident_cely, bibTex())" [matTooltip]="'BibTeX'">
        {{ 'BibTeX' }}
      </a>
    }
  </mat-menu>

  <a matIconButton target="_blank" [href]="'print/'+result().ident_cely+'?lang='+state.currentLang" [matTooltip]="'card.tooltip.Vytisknout' | translate">
    <mat-icon>print</mat-icon>
  </a>

  @if (state.logged) {
    <button matIconButton (click)="toggleFav()" [class.app-color-fav]="result().isFav" [matTooltip]="result().isFav ? ('card.tooltip.Odebrat z oblíbených' | translate)  : ('card.tooltip.Uložit do oblíbených' | translate)">
      <mat-icon>grade</mat-icon>
    </button>
  }

  <button matIconButton (click)="openFeedback()" [matTooltip]="'card.tooltip.Odeslat komentář' | translate">
    <mat-icon>feedback</mat-icon>
  </button>

  <button matIconButton target="stats" routerLink="/stats" [queryParams]="{ident_cely: result().ident_cely}" [matTooltip]="'navbar.desc.stats' | translate">
    <mat-icon>query_stats</mat-icon>
  </button>
  
  @if (!isDocumentDialogOpen() && !inDocument()) {
    <button matButton="filled" (click)="toggleDetail()" [ngClass]="detailExpanded() ? 'app-rotate-up' : 'app-rotate-down'">
      {{(detailExpanded() ? 'card.button.Skrýt detail' : 'card.button.Zobrazit detail') | translate }}<mat-icon>expand_more</mat-icon>
    </button>
  }
  @if (state.itemView === 'col' && !isDocumentDialogOpen() && !inDocument()) {
    <button matButton="filled" class="app-col-detail" (click)="openDocument()">
      {{ 'card.button.Zobrazit detail' | translate }}
    </button>
  }
  @if (state.itemView === 'col' && isDocumentDialogOpen() && !inDocument()) {
    <button matButton="filled" class="app-col-detail" [mat-dialog-close]="false">
      {{ 'card.button.Skrýt detail' | translate }}
    </button>
  }
</div>