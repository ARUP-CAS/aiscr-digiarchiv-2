@if (state.loading) {
  <div class="app-display-table app-loading"><mat-progress-bar mode="indeterminate"></mat-progress-bar></div>
}
@if (docs.length > 0) {
  <div>
    @if (docs.length > 0) {
      <table>
        <thead>
          <tr>
            <th>#</th>
            @for (field of config.exportFields[state.entity]; track field) {
              <th>{{ 'export.field.' + (field.label ? field.label : field.name) | translate }}</th>
            }
          </tr>
        </thead>
        <tbody>
          @for (r of docs; track r; let idx = $index) {
            <tr>
              <td>{{idx + 1}}</td>
              @for (field of config.exportFields[state.entity]; track field) {
                <td>
                  @if (field.byPath) {
                    @if (field.heslar) {
                      {{ getByPath(r, field.name) | translate}}
                    }
                    @if (!field.heslar && field.type === 'date') {
                      {{ getByPath(r, field.name) | date : 'yyyy-MM-dd'}}
                    }
                    @if (!field.heslar && field.type !== 'date') {
                      {{ getByPath(r, field.name) }}
                    }
                  }
                  @if (!field.byPath) {
                    @if (field.type === 'boolean') {
                      {{r[field.name] + '' | translate}}
                    }
                    @if (field.heslar) {
                      {{r[field.name] | translate}}
                    }
                    @if (!field.heslar && field.type === 'date') {
                      {{r[field.name] | date : 'yyyy-MM-dd'}}
                    }
                    @if (!field.heslar && field.type !== 'date' && field.type !== 'boolean') {
                      {{r[field.name]}}
                    }
                  }
                </td>
              }
            </tr>
          }
        </tbody>
      </table>
    }
  </div>
}
